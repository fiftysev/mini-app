(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{154:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(27),r=n.n(c),i=n(14),s=n.n(i),o=n(21),l=n(5),d=[{id:1,name:"\u0411\u043e\u043b\u044c\u043d\u0438\u0446\u0430",img:"https://avatars.mds.yandex.net/i?id=a03010a96101f9d66f3696090e8ca2a1-5858835-images-thumbs&n=13&exp=1"},{id:2,name:"\u0417\u0430\u0432\u043e\u0434",img:"https://avatars.mds.yandex.net/i?id=fadee1456f428497d015625827a8a138-4453150-images-thumbs&n=13&exp=1"},{id:3,name:"\u041f\u043b\u044f\u0436",img:"https://yandex-images.clstorage.net/9IPR93h31/e23dd0AkMye/cP-8m9taVrDhtnnRUU11YAM5sms-j_I3aHalLGd4ZaX4pVWN1UHr1zzMZCna2z-gG3L1uQ7XeVqCFjpPRtVZD-avL50cyZQwoba6kxePNKLBOnBqO44yoX2wc2-3emR16KdUQlrd9kvyU6j30pEgZtok4GwchaiKmNj5GF9Php_ytj5a2sRZfa-le5OZT7KnlXj4rCzAbrHi4zZhvunscah8ioHR0_0JcVDmuVrb5inb6-qjUhcgxNKeal6RQsaXOnl229_D3z9h5XXS1E60Zxy_d2ghDix7a2D1rvhm7DGkdQoEGB77QnecKD-SHmqrGO6rI1tWrE7cGuVWHk0A0HM4vppTAhky5Oh0nxjNMSBdPrctqMbpeGsn8mx1Lub7b3OMjpeVPAU80qm2EhFmJFRm6eCXl-YEVJKgkJHGDlE2sHYe24uc_GWjddFXyb-sVXp5q6WFZ7ZoanavOOjjvydzQkgdkDIJfVIvOR0SIOvW5yutmZ8khpmdYtEZiIDbvrMwmdIBXXWvILvalom1Itsx8qshCe456uox7frmJbHq-8IAVx08SjydqfiVVuFilqRrJxgSZMRVU6FQmoaNVrz8-J6UiJzxqWv3UBmB8qNaeLZsJYQgv2WhOa-47-c2Zr5DAxHYc4f7Guw0GVCp4BLj6iAWnG0B35VkUJMLjpZ5-zrRU0EXPaap8l1ZBbXu2zy2ZyxLLjwhoXNmPydruC6zSsyYUXqD9dZg-J1fYmqYKmol1lZiT5IRKBgdy8rfuzA11NwJkPtn67RQGM62bJw8PShmBC_2ZST1rrstLnCkNUSN3JVyxT3RqTaW3iapmWph5F4QJYpTXaJf24WHWzux_VQSDJl9bKv12VHGtWXTP7OmrARmt2Rr_WA1aaY3ZbnIxhcYOk_4mio-Edvpah-mLKXcHu2NntwkX18Pj1JzMzYbXc-WMmPge1AXQbIv0b8_7ezOK3yrpXKkeo"},{id:4,name:"\u041a\u0430\u0444\u0435",img:"https://avatars.mds.yandex.net/i?id=2a00000179fd41a32c98fca6d71ca4384c69-4217254-images-thumbs&n=13&exp=1"},{id:5,name:"\u041a\u0438\u043d\u043e\u0442\u0435\u0430\u0442\u0440",img:"https://avatars.mds.yandex.net/i?id=cecfe262038295b2170e49a29a77c774-5222088-images-thumbs&n=13&exp=1"},{id:6,name:"\u0428\u043a\u043e\u043b\u0430",img:"https://avatars.mds.yandex.net/i?id=5482721d3c34f1087126403bc38e6ba3-5189886-images-thumbs&n=13&exp=1"},{id:7,name:"\u041a\u043e\u0444\u0435\u0439\u043d\u044f",img:"https://avatars.mds.yandex.net/i?id=658ec3fd2d280727643a18305739c00b-4012443-images-thumbs&n=13&exp=1"},{id:8,name:"\u0421\u0442\u0443\u0434\u0438\u044f",img:"https://yandex-images.clstorage.net/9IPR93h31/e23dd0AkMye/cP-8m9taVrDhtnnRUU11YAM5sms-j_I3aHam-eU6peY4MZWYgEF-1_zNJD0PjX_gW-Z1Ow7XelrWgXpPBtYZjiWvb50cyZQwoba6kxePNKLBOnBqO44yoX2wc2-3emR16KdUQlrd9kvyU6j30pEgZtok4GwchaiKmNj5GF9Php_ytj5a2sRZfa-le5OZT7KnlXj4rCzAbrHi4zZhvunscah8ioHR0_0JcVDmuVrb5inb6-qjUhcgxNKeal6RQsaXOnl229_D3z9h5XXS1E60Zxy_d2ghDix7a2D1rvhm7DGkdQoEGB77QnecKD-SHmqrGO6rI1tWrE7cGuVWHk0A0HM4vppTAhky5Oh0nxjNMSBdPrctqMbpeGsn8mx1Lub7b3OMjpeVPAU80qm2EhFmJFRm6eCXl-YEVJKgkJHGDlE2sHYe24uc_GWjddFXyb-sVXp5q6WFZ7ZoanavOOjjvydzQkgdkDIJfVIvOR0SIOvW5yutmZ8khpmdYtEZiIDbvrMwmdIBXXWvILvalom1Itsx8qshCe456uox7frmJbHq-8IAVx08SjydqfiVVuFilqRrJxgSZMRVU6FQmoaNVrz8-J6UiJzxqWv3UBmB8qNaeLZsJYQgv2WhOa-47-c2Zr5DAxHYc4f7Guw0GVCp4BLj6iAWnG0B35VkUJMLjpZ5-zrRU0EXPaap8l1ZBbXu2zy2ZyxLLjwhoXNmPydruC6zSsyYUXqD9dZg-J1fYmqYKmol1lZiT5IRKBgdy8rfuzA11NwJkPtn67RQGM62bJw8PShmBC_2ZST1rrstLnCkNUSN3JVyxT3RqTaW3iapmWph5F4QJYpTXaJf24WHWzux_VQSDJl9bKv12VHGtWXTP7OmrARmt2Rr_WA1aaY3ZbnIxhcYOk_4mio-Edvpah-mLKXcHu2NntwkX18Pj1JzMzYbXc-WMmPge1AXQbIv0b8_7ezOK3yrpXKkeo"},{id:9,name:"\u041f\u043e\u043b\u0438\u0446\u0438\u044f",img:"https://avatars.mds.yandex.net/i?id=982c6e522a0328fb99f713cef7d27528-5265887-images-thumbs&n=13&exp=1"},{id:10,name:"\u0414\u043e\u043c",img:"https://avatars.mds.yandex.net/i?id=eb0d7d1e436c66e293aa05c323871d47-5433116-images-thumbs&n=13&exp=1"}],u=n(38),j=n.n(u),m=n(2),b=function(e){var t=e.name,n=e.img;return Object(m.jsx)(l.d,{children:Object(m.jsxs)("div",{className:j.a.listitem,children:[n&&Object(m.jsx)("img",{src:n,alt:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f"}),Object(m.jsx)(l.g,{children:t})]})})},h=function(e){e.id;var t=e.locations;return Object(m.jsx)(l.e,{size:"l",children:t.map((function(e){return Object(m.jsx)(b,{id:e.id,name:e.name,img:e.img},e.id)}))})},p=function(e){var t=e.id,n=e.go;return Object(m.jsxs)(l.l,{id:t,children:[Object(m.jsx)(l.m,{left:Object(m.jsx)(l.n,{onClick:n,"data-to":"home"}),children:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438"}),Object(m.jsx)(l.c,{style:{fontSize:"24px",height:"50px",margin:"16px"},appearance:"positive",onClick:n,"data-to":"location-add",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u043a\u0430\u0446\u0438\u044e"}),Object(m.jsx)(h,{locations:d})]})},x=(n(144),n(160)),O=n(161),f=n(16),g=n(39),y=n.n(g),v=n(26),_=n.n(v),k=n(162),V=[{id:0,name:"",isSpy:!1},{id:1,name:"",isSpy:!1},{id:2,name:"",isSpy:!1},{id:3,name:"",isSpy:!1}],X=y()((function(e){return{playersCount:4,players:V,locations:d,currentPlayer:{},spy:{},addLocation:function(t,n){return e((function(e){return e.locations.push({id:Object(k.a)(),name:t,img:n}),Object(f.a)({},e)}))},updatePlayer:function(t,n){return e((function(e){var a=e.players.findIndex((function(e){return e.id===t}));return-1===a?e.players.push({id:t,name:n,isSpy:!1}):e.players[a].name=n,Object(f.a)({},e)}))},setPlayersCount:function(t){return e((function(e){for(;e.players.length>t;)e.players.pop();for(var n=e.players.length;n<t;n++)e.players.push({id:n,name:"",isSpy:!1});return Object(f.a)(Object(f.a)({},e),{},{playersCount:t})}))},newGame:function(){return e((function(e){for(var t=_.a.sample(e.locations),n=0;n<e.playersCount;n++)e.players[n].location=t.name;var a=_.a.random(0,e.playersCount-1);return e.players[a].location="???",e.players[a].isSpy=!0,Object(f.a)(Object(f.a)({},e),{},{currentPlayer:e.players[0]})}))},next:function(){return e((function(e){if(void 0===e.players[e.currentPlayer.id+1])throw new Error("Out of bounds!");return e.currentPlayer.isSpy&&(e.spy=e.currentPlayer),Object(f.a)(Object(f.a)({},e),{},{currentPlayer:e.players[++e.currentPlayer.id]})}))},endGame:function(){return e((function(e){return Object(f.a)(Object(f.a)({},e),{},{currentPlayer:{},spyName:""})}))}}})),C=function(e){var t=e.id,n=e.go,a=(e.fetchedUser,X((function(e){return e.newGame})));return Object(m.jsxs)(l.l,{id:t,children:[Object(m.jsx)(l.m,{children:"\u0428\u043f\u0438\u043e\u043d"}),Object(m.jsx)(l.g,{style:{margin:"auto",width:"75%"},children:Object(m.jsx)(l.c,{style:{width:"100%",height:"50px"},onClick:function(e){n(e),a()},"data-to":"game",children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"})}),Object(m.jsxs)(l.r,{children:[Object(m.jsx)(l.s,{text:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438","data-to":"locations",onClick:n,children:Object(m.jsx)(x.a,{})}),Object(m.jsx)(l.s,{text:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","data-to":"settings",onClick:n,children:Object(m.jsx)(O.a,{})})]})]})},P=n(40),S=n.n(P),Z=function(e){var t=X((function(e){return e.playersCount})),n=X((function(e){return e.setPlayersCount})),a=X((function(e){return e.players})),c=X((function(e){return e.updatePlayer}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.i,{children:Object(m.jsx)(l.h,{top:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432:",children:Object(m.jsx)(l.o,{defaultValue:t,placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432",onChange:function(e){return n(e.target.value)},options:[{value:3,label:3},{value:4,label:4},{value:5,label:5},{value:6,label:6},{value:7,label:7},{value:8,label:8}]})})}),Object(m.jsx)(l.h,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u0435\u043d\u0430 \u0438\u0433\u0440\u043e\u043a\u043e\u0432",children:a.map((function(e){return Object(m.jsx)(l.k,{style:{margin:"16px 0"},placeholder:"\u0418\u043c\u044f",defaultValue:e.name,onChange:function(t){c(e.id,t.target.value)}},e.id)}))}),Object(m.jsx)(l.c,{className:S.a.button,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})},W=function(e){var t=e.id,n=e.go;return Object(m.jsxs)(l.l,{id:t,children:[Object(m.jsx)(l.m,{left:Object(m.jsx)(l.n,{onClick:n,"data-to":"home"}),children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(m.jsx)(Z,{})]})},J=n(22),N=n.n(J),w=n(41),G=n.n(w),I=function(e){var t=e.id,n=e.go,c=Object(a.useState)(!1),r=Object(o.a)(c,2),i=r[0],s=r[1],d=X((function(e){return e.endGame})),u=X((function(e){return e.currentPlayer})),j=X((function(e){return e.next})),b=function(e){s((function(e){return!e}))};return Object(m.jsxs)(l.l,{id:t,children:[Object(m.jsx)(l.m,{children:"\u0418\u0433\u0440\u043e\u0432\u043e\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u0441"}),Object(m.jsx)(l.j,{style:{margin:"16px auto"},children:"\u0412\u0430\u0448\u0430 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430:"}),Object(m.jsxs)(G.a,{isFlipped:i,containerClassName:N.a.card,children:[Object(m.jsx)(l.d,{className:"".concat(N.a.inner__card," ").concat(N.a.front),mode:"shadow",onClick:b,children:Object(m.jsx)("p",{children:"\u041d\u0430\u0436\u0430\u0442\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u0435\u0440\u043d\u0435\u0442 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443!"})}),Object(m.jsxs)(l.d,{className:"".concat(N.a.inner__card," ").concat(N.a.back),mode:"shadow",onClick:b,children:[Object(m.jsxs)("p",{children:["\u041b\u043e\u043a\u0430\u0446\u0438\u044f: ",u.location]}),u.isSpy&&Object(m.jsx)("p",{children:"\u0412\u044b \u0448\u043f\u0438\u043e\u043d!"})]})]}),Object(m.jsx)(l.c,{className:N.a.btn,onClick:function(e){try{console.log(u),j(),s(!1)}catch(t){console.error(e),d(),n(e)}},"data-to":"countdown",children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430"})]})},z=n(42),A=n(32),q=n.n(A),R=n(18),K=n.n(R),D=n(43),U=function(e){e.hours;var t=e.minutes,n=e.seconds,a=e.completed,c=e.go;return a?Object(m.jsxs)("div",{className:K.a.layout,children:[Object(m.jsx)("p",{className:K.a.heading,children:"\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u0448\u043b\u043e!"}),Object(m.jsx)(l.c,{className:K.a.btn,onClick:c,"data-to":"results",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u043c"})]}):Object(m.jsxs)("div",{className:K.a.layout,children:[Object(m.jsx)("p",{className:K.a.heading,children:"\u0412\u0440\u0435\u043c\u044f \u043f\u043e\u0448\u043b\u043e!"}),Object(m.jsxs)("p",{className:K.a.timer,children:[Object(v.padStart)(t.toString(),2,"0"),":",Object(v.padStart)(n.toString(),2,"0"),Object(m.jsx)(l.c,{className:K.a.btn,onClick:c,"data-to":"results",children:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0440\u0430\u0443\u043d\u0434"})]})]})},M=function(e){var t=e.id,n=e.go,a=60*X((function(e){return e.playersCount}))*1e3;return Object(m.jsxs)(l.l,{id:t,className:K.a.layout,children:[Object(m.jsx)(l.m,{children:"\u0422\u0430\u0439\u043c\u0435\u0440 \u0438\u0433\u0440\u044b"}),Object(m.jsx)(D.a,{date:Date.now()+a,onComplete:function(){s.a.send("VKWebAppFlashGetInfo").then((function(e){return e.is_available})).then((function(e){if(e){var t=setInterval(Object(z.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.send("VKWebAppFlashGetInfo").then((function(e){return e.level}));case 2:t=e.sent,s.a.send("VKWebAppFlashSetLevel",{level:t?0:1}).then((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)}))),250);setTimeout((function(){clearInterval(t),s.a.send("VKWebAppFlashSetLevel",{level:0}).then((function(e){return console.log(e)})).catch((function(e){return console.error(e)}))}),1e4)}}))},renderer:function(e){return Object(m.jsx)(U,{go:n,minutes:e.minutes,completed:e.completed,seconds:e.seconds})}})]})},Y=n(28),B=n.n(Y),H=function(e){var t=e.id,n=e.go,a=X((function(e){return e.spy.name}));return Object(m.jsxs)(l.l,{id:t,children:[Object(m.jsx)(l.m,{children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0438\u0433\u0440\u044b"}),Object(m.jsxs)(l.g,{className:B.a.layout,children:[Object(m.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/d/d7/Creative-Tail-People-spy.svg",alt:"\u0428\u043f\u0438\u043e\u043d"}),Object(m.jsxs)("p",{className:B.a.result_text,children:["\u0428\u043f\u0438\u043e\u043d\u043e\u043c \u0431\u044b\u043b(\u0430) ",a]}),Object(m.jsx)(l.c,{className:B.a.btn,onClick:n,"data-to":"home",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u044d\u043a\u0440\u0430\u043d"})]})]})},L=function(e){var t=e.id,n=e.go,c=Object(a.useState)(""),r=Object(o.a)(c,2),i=r[0],s=r[1],d=Object(a.useState)(""),u=Object(o.a)(d,2),j=u[0],b=u[1],h=X((function(e){return e.addLocation}));return Object(m.jsxs)(l.l,{id:t,children:[Object(m.jsx)(l.m,{left:Object(m.jsx)(l.n,{onClick:n,"data-to":"locations"}),children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"}),Object(m.jsxs)(l.i,{children:[Object(m.jsx)(l.h,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438",children:Object(m.jsx)(l.k,{placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438",required:!0,onChange:function(e){return s(e.target.value)}})}),Object(m.jsx)(l.h,{top:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0444\u043e\u0442\u043e (\u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)",children:Object(m.jsx)(l.k,{placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0444\u043e\u0442\u043e \u043b\u043e\u043a\u0430\u0446\u0438\u0438",onChange:function(e){return b(e.target.value)}})})]}),Object(m.jsx)(l.c,{style:{width:"75%",height:"50px",margin:"16px auto"},appearance:"positive",onClick:function(e){h(i,j),n(e)},"data-to":"locations",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})},F=function(){var e=Object(a.useState)("bright_light"),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)("home"),i=Object(o.a)(r,2),d=i[0],u=i[1];Object(a.useEffect)((function(){s.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;"VKWebAppUpdateConfig"===n&&c(a.scheme)}))}),[]);var j=function(e){u(e.currentTarget.dataset.to)};return Object(m.jsx)(l.f,{scheme:n,children:Object(m.jsx)(l.a,{children:Object(m.jsx)(l.b,{children:Object(m.jsx)(l.q,{children:Object(m.jsx)(l.p,{children:Object(m.jsxs)(l.t,{activePanel:d,children:[Object(m.jsx)(C,{id:"home",go:j}),Object(m.jsx)(p,{id:"locations",go:j}),Object(m.jsx)(I,{id:"game",go:j}),Object(m.jsx)(W,{id:"settings",go:j}),Object(m.jsx)(M,{id:"countdown",go:j}),Object(m.jsx)(H,{id:"results",go:j}),Object(m.jsx)(L,{id:"location-add",go:j})]})})})})})})};s.a.send("VKWebAppInit"),r.a.render(Object(m.jsx)(F,{}),document.getElementById("root"))},18:function(e,t,n){e.exports={layout:"countdown_layout__1o92e",heading:"countdown_heading__1wJOB",btn:"countdown_btn__2BnDM",timer:"countdown_timer__2FtI8"}},22:function(e,t,n){e.exports={card:"game_card__gIA6O",inner__card:"game_inner__card__FPykS",btn:"game_btn__3JAmV",front:"game_front__ePQtf",back:"game_back__1S4cM"}},28:function(e,t,n){e.exports={layout:"results_layout__nvCig",result_text:"results_result_text__1ipWz",btn:"results_btn__1dMlN"}},38:function(e,t,n){e.exports={listitem:"listitem_listitem__AqlXz"}},40:function(e,t,n){e.exports={button:"settingsform_button__2SdoG"}}},[[154,1,2]]]);
//# sourceMappingURL=main.9c4b268e.chunk.js.map